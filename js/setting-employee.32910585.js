(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["setting-employee"],{"20d6":function(t,e,n){"use strict";var a=n("5ca1"),r=n("0a49")(6),i="findIndex",s=!0;i in[]&&Array(1)[i](function(){s=!1}),a(a.P+a.F*s,"Array",{findIndex:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),n("9c6c")(i)},"37ec":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"container"},[n("comp-tab",{attrs:{data:[{label:"人员管理",value:0},{label:"角色管理",value:1}]},model:{value:t.status,callback:function(e){t.status=e},expression:"status"}})],1),n("div",{staticClass:"container"},[n("el-row",{attrs:{gutter:"8"}},[n("el-col",{attrs:{span:"6"}},[n("el-input",{attrs:{placeholder:"请输入员工姓名","prefix-icon":"el-icon-search",size:"small"},model:{value:t.params.name,callback:function(e){t.$set(t.params,"name",e)},expression:"params.name"}})],1),n("el-col",{attrs:{span:"4"}},[n("el-button",{attrs:{size:"small"},on:{click:t.onSearch}},[t._v("搜索")])],1),n("el-col",{staticClass:"fr-jcfe",attrs:{offset:"10",span:"4"}},[n("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.addEmployee}},[t._v("添加员工")])],1)],1)],1),n("div",{staticClass:"container"},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.list,border:""}},[n("el-table-column",{attrs:{label:"员工姓名",prop:"name",width:"150"}}),n("el-table-column",{attrs:{label:"手机号",prop:"mobile",width:"200"}}),n("el-table-column",{attrs:{label:"角色/权限",width:"450"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("div",[n("div",{staticClass:"role-title"},[t._v(t._s(e.row.storerole.name))]),n("div",t._l(e.row.storerole.cansList,function(e){return n("span",{key:e,staticClass:"role-item"},[t._v(t._s(e))])}))])]}}])}),n("el-table-column",{attrs:{label:"添加时间",width:"250"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(new Date(1e3*e.row.createdat).toLocaleString()))])]}}])}),n("el-table-column",{attrs:{label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.isSelf?n("div",{staticStyle:{color:"#999","text-align":"center"}},[t._v("当前帐号")]):n("div",{staticStyle:{"text-align":"center"}},[n("el-button",{attrs:{disabled:"Admin"==e.row.name,size:"small",type:"text"},on:{click:function(n){t.onEdit(e.row)}}},[t._v("修改")]),n("el-button",{attrs:{disabled:"Admin"==e.row.name,size:"small",type:"text"},on:{click:function(n){t.onDelete(e.row)}}},[t._v("删除")])],1)]}}])})],1)],1)])},r=[],i=(n("20d6"),n("7514"),n("ac6a"),n("be94")),s=(n("96cf"),n("1da1")),o=(n("a481"),n("ab1c")),l=n("e8e1"),c=n("8e44"),u=n("73cd"),d={name:"Employee",components:{"comp-tab":o["a"]},watch:{status:function(){this.$router.replace("/setting/roles")}},data:function(){return{token:"",status:0,params:{name:"",count:100},list:[]}},mounted:function(){this.token=Object(u["e"])(),this.onSearch()},methods:{onSearch:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(){var e,n,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(c["a"])("StoreStoreAdminService.GetStoreAdminList",Object(l["a"])("StoreAdminListQueryRequest",Object(i["a"])({token:Object(l["a"])("Token",{token:this.token})},this.params)));case 2:return e=t.sent,n=e.storeadminlistList.map(function(t){return t.storeroleid}),t.next=6,Object(c["a"])("StoreStoreRoleService.GetStoreRoleList",Object(l["a"])("StoreRoleListQueryRequest",{token:Object(l["a"])("Token",{token:this.token}),idlistList:n,count:n.length}));case 6:a=t.sent,e.storeadminlistList.forEach(function(t){return t.storerole=a.storerolelistList.find(function(e){return e.id===t.storeroleid})}),this.list=e.storeadminlistList;case 9:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),onEdit:function(t){var e=t.id;this.$router.push({name:"setting-employee-edit",query:{id:e}})},onDelete:function(t){var e=this;this.$confirm("确认删除？").then(Object(s["a"])(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){while(1)switch(n.prev=n.next){case 0:Object(c["a"])("StoreStoreAdminService.DeleteStoreAdmin",Object(l["a"])("IDWithTokenRequest",{token:Object(l["a"])("Token",{token:e.token}),id:t.id})).then(function(n){e.list.splice(e.list.findIndex(function(e){return e.id===t.id}),1),e.$message({message:"操作成功",type:"success"})});case 1:case"end":return n.stop()}},n,this)}))).catch(function(){})},addEmployee:function(){this.$router.push({name:"setting-employee-edit"})}}},f=d,v=(n("6a22"),n("2877")),m=Object(v["a"])(f,a,r,!1,null,"71f7c49c",null);e["default"]=m.exports},"56ee":function(t,e,n){"use strict";var a=n("bff6"),r=n.n(a);r.a},"655f":function(t,e,n){},"6a22":function(t,e,n){"use strict";var a=n("655f"),r=n.n(a);r.a},a481:function(t,e,n){"use strict";var a=n("cb7c"),r=n("4bf8"),i=n("9def"),s=n("4588"),o=n("0390"),l=n("5f1b"),c=Math.max,u=Math.min,d=Math.floor,f=/\$([$&`']|\d\d?|<[^>]*>)/g,v=/\$([$&`']|\d\d?)/g,m=function(t){return void 0===t?t:String(t)};n("214f")("replace",2,function(t,e,n,p){return[function(a,r){var i=t(this),s=void 0==a?void 0:a[e];return void 0!==s?s.call(a,i,r):n.call(String(i),a,r)},function(t,e){var r=p(n,t,this,e);if(r.done)return r.value;var d=a(t),f=String(this),v="function"===typeof e;v||(e=String(e));var b=d.global;if(b){var k=d.unicode;d.lastIndex=0}var g=[];while(1){var S=l(d,f);if(null===S)break;if(g.push(S),!b)break;var w=String(S[0]);""===w&&(d.lastIndex=o(f,i(d.lastIndex),k))}for(var y="",_=0,x=0;x<g.length;x++){S=g[x];for(var j=String(S[0]),O=c(u(s(S.index),f.length),0),$=[],A=1;A<S.length;A++)$.push(m(S[A]));var L=S.groups;if(v){var R=[j].concat($,O,f);void 0!==L&&R.push(L);var C=String(e.apply(void 0,R))}else C=h(j,f,O,$,L,e);O>=_&&(y+=f.slice(_,O)+C,_=O+j.length)}return y+f.slice(_)}];function h(t,e,a,i,s,o){var l=a+t.length,c=i.length,u=v;return void 0!==s&&(s=r(s),u=f),n.call(o,u,function(n,r){var o;switch(r.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,a);case"'":return e.slice(l);case"<":o=s[r.slice(1,-1)];break;default:var u=+r;if(0===u)return r;if(u>c){var f=d(u/10);return 0===f?r:f<=c?void 0===i[f-1]?r.charAt(1):i[f-1]+r.charAt(1):r}o=i[u-1]}return void 0===o?"":o})}})},ab1c:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"tab"},t._l(t.data,function(e){return n("div",{key:e.label,class:["tab-item",{active:t.value===e.value}],on:{click:function(n){t.onClickItem(e.value)}}},[t._v(t._s(e.label))])}))},r=[],i={props:{data:{type:Array,default:function(){return[{label:"test",value:0},{label:"test2",value:1}]},required:!0},value:{default:"",required:!0}},methods:{onClickItem:function(t){this.$emit("input",t)}}},s=i,o=(n("56ee"),n("2877")),l=Object(o["a"])(s,a,r,!1,null,"5e44c4ee",null);e["a"]=l.exports},bff6:function(t,e,n){}}]);
//# sourceMappingURL=setting-employee.32910585.js.map