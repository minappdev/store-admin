(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["branchstore"],{"20d6":function(e,t,n){"use strict";var r=n("5ca1"),s=n("0a49")(6),o="findIndex",a=!0;o in[]&&Array(1)[o](function(){a=!1}),r(r.P+r.F*a,"Array",{findIndex:function(e){return s(this,e,arguments.length>1?arguments[1]:void 0)}}),n("9c6c")(o)},"56ee":function(e,t,n){"use strict";var r=n("bff6"),s=n.n(r);s.a},"61a0":function(e,t,n){"use strict";n.r(t);var r,s,o=n("80bf"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"container fr-aic fr-jcsb"},[n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){e.showNewRuleForm=!0}}},[e._v("添加分店")]),n("span",{staticStyle:{color:"#999999"}},[e._v("您可在右上角切换店铺")])],1),n("div",{staticClass:"container"},[n("el-table",{attrs:{data:e.list}},[n("el-table-column",{attrs:{label:"ID",prop:"id"}}),n("el-table-column",{attrs:{label:"分店名"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.name))])]}}])}),n("el-table-column",{attrs:{label:"地址"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.storeaddress))])]}}])}),n("el-table-column",{attrs:{label:"创建时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(new Date(1e3*t.row.createdat).toLocaleString()))])]}}])}),n("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[1===t.row.closed?n("el-button",{attrs:{disabled:0===t.row.fromstoreid,size:"small",type:"text"},on:{click:function(n){e.close(t.row)}}},[e._v("关店")]):e._e(),2===t.row.closed?n("el-button",{attrs:{disabled:0===t.row.fromstoreid,size:"small",type:"text"},on:{click:function(n){e.open(t.row)}}},[e._v("开启")]):e._e()]}}])})],1)],1),n("el-dialog",{attrs:{visible:e.showNewRuleForm,title:"分店",width:"500px"},on:{"update:visible":function(t){e.showNewRuleForm=t}}},[n("el-form",{ref:"form",attrs:{"label-width":"50px","label-position":"left",size:"small"}},[n("el-form-item",{attrs:{label:"分店"}},[n("el-row",[n("el-col",{attrs:{span:"8"}},[n("el-input",{attrs:{placeholder:"分店名"},model:{value:e.store.name,callback:function(t){e.$set(e.store,"name",t)},expression:"store.name"}})],1)],1)],1)],1),n("div",{staticClass:"dialog-footer fr-jcfs",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.onSubmit}},[e._v("保存")])],1)],1)],1)},i=[],c=(n("20d6"),n("96cf"),n("1da1")),l=n("ab1c"),u=n("e8e1"),f=n("8e44"),d=n("73cd"),p={components:{"comp-tab":l["a"]},data:function(){return{list:[],store:{},showNewRuleForm:!1,token:""}},created:function(){this.token=Object(d["e"])(),this.getList()},methods:{getList:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(f["a"])("StoreAuthService.GetBranchStoreList",Object(u["a"])("Token",{token:this.token}));case 2:t=e.sent,this.list=t.storelistList;case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),open:function(e){var t=this;e=JSON.parse(JSON.stringify(e)),Object(f["a"])("StoreAuthService.OpenOrCloseBranchStore",Object(u["a"])("OpenOrCloseBranchStoreRequest",{token:Object(u["a"])("Token",{token:this.token}),storeid:e.id,closed:1})).then(function(e){t.list.splice(t.list.findIndex(function(t){return t.id===e.id}),1,e),t.$message({message:"操作成功",type:"success"})})},close:function(e){var t=this;e=JSON.parse(JSON.stringify(e)),Object(f["a"])("StoreAuthService.OpenOrCloseBranchStore",Object(u["a"])("OpenOrCloseBranchStoreRequest",{token:Object(u["a"])("Token",{token:this.token}),storeid:e.id,closed:2})).then(function(e){t.list.splice(t.list.findIndex(function(t){return t.id===e.id}),1,e),t.$message({message:"操作成功",type:"success"})})},onSubmit:function(){var e=this,t=JSON.parse(JSON.stringify(this.store));Object(f["a"])("StoreAuthService.CreateBranchStore",Object(u["a"])("NewStoreRequest",{token:Object(u["a"])("Token",{token:this.token}),store:Object(u["a"])("Store",t)})).then(function(t){e.$message({message:"操作成功",type:"success"}),location.reload()})}}},b=p,m=n("2877"),h=Object(m["a"])(b,a,i,!1,null,null,null),v=h.exports,k={_:v},w={0:"_",1:"_",2:"_",3:"_",4:"_",6:"_",7:"_"},O=Object(o["a"])({name:"branchstore-entry",components:k,map:w}),_=O,S=Object(m["a"])(_,r,s,!1,null,null,null);t["default"]=S.exports},"80bf":function(e,t,n){"use strict";n("96cf");var r=n("1da1"),s=(n("7f7f"),n("a3fb"));t["a"]=function(e){var t=e.name,n=e.components,o=e.map;return{name:t,components:n,data:function(){return{store:{}}},created:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(s["b"])();case 2:this.store=e.sent;case 3:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),render:function(e){return e(o[this.store.kind])}}}},ab1c:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"tab"},e._l(e.data,function(t){return n("div",{key:t.label,class:["tab-item",{active:e.value===t.value}],on:{click:function(n){e.onClickItem(t.value)}}},[e._v(e._s(t.label))])}))},s=[],o={props:{data:{type:Array,default:function(){return[{label:"test",value:0},{label:"test2",value:1}]},required:!0},value:{default:"",required:!0}},methods:{onClickItem:function(e){this.$emit("input",e)}}},a=o,i=(n("56ee"),n("2877")),c=Object(i["a"])(a,r,s,!1,null,"5e44c4ee",null);t["a"]=c.exports},bff6:function(e,t,n){}}]);
//# sourceMappingURL=branchstore.e6d11b34.js.map