(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["setting-roles"],{"20d6":function(t,e,n){"use strict";var i=n("5ca1"),r=n("0a49")(6),a="findIndex",o=!0;a in[]&&Array(1)[a](function(){o=!1}),i(i.P+i.F*o,"Array",{findIndex:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),n("9c6c")(a)},"56ee":function(t,e,n){"use strict";var i=n("bff6"),r=n.n(i);r.a},"5df3":function(t,e,n){"use strict";var i=n("02f4")(!0);n("01f9")(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=i(e,n),this._i+=t.length,{value:t,done:!1})})},"912d":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"container"},[n("comp-tab",{attrs:{data:[{label:"人员管理",value:0},{label:"角色管理",value:1}]},model:{value:t.status,callback:function(e){t.status=e},expression:"status"}})],1),n("div",{staticClass:"container"},[n("el-row",{attrs:{gutter:"8"}},[n("el-col",{staticClass:"fr-jcfe",attrs:{offset:"20",span:"4"}},[n("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.addRole}},[t._v("添加角色")])],1)],1)],1),n("div",{staticClass:"container"},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.list,border:""}},[n("el-table-column",{attrs:{label:"角色",prop:"name",width:"250"}}),n("el-table-column",{attrs:{label:"权限",width:"400"},scopedSlots:t._u([{key:"default",fn:function(e){return["Admin"!=e.row.name?n("span",t._l(e.row.cansList,function(e){return n("span",{key:e,staticStyle:{"margin-right":"8px"}},[t._v(t._s(e))])})):t._e(),"Admin"==e.row.name?n("span",{staticStyle:{"margin-right":"8px",color:"#ff4f4f"}},[t._v("所有权限")]):t._e()]}}])}),n("el-table-column",{attrs:{label:"员工数量",prop:"storeadmincount",width:"100"}}),n("el-table-column",{attrs:{label:"更新时间",width:"250"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(new Date(1e3*e.row.updatedat).toLocaleString()))])]}}])}),n("el-table-column",{attrs:{fixed:"right",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{disabled:"Admin"==e.row.name,size:"small",type:"text"},on:{click:function(n){t.onEdit(e.row)}}},[t._v("修改")]),n("el-button",{attrs:{disabled:"Admin"==e.row.name,size:"small",type:"text"},on:{click:function(n){t.onDelete(e.row)}}},[t._v("删除")])]}}])})],1)],1)])},r=[],a=(n("20d6"),n("ac6a"),n("5df3"),n("96cf"),n("1da1")),o=(n("a481"),n("ab1c")),s=n("e8e1"),l=n("8e44"),c=n("73cd"),u={name:"Roles",components:{"comp-tab":o["a"]},watch:{status:function(){this.$router.replace("/setting/employee")}},data:function(){return{token:"",status:1,list:[]}},mounted:function(){this.token=Object(c["e"])(),this.getList()},methods:{getList:function(){var t=Object(a["a"])(regeneratorRuntime.mark(function t(){var e,n,i,r=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(l["a"])("StoreStoreRoleService.GetStoreRoleList",Object(s["a"])("StoreRoleListQueryRequest",{token:Object(s["a"])("Token",{token:this.token}),count:100}));case 2:return e=t.sent,n=e.storerolelistList.map(function(t){return Object(l["a"])("StoreStoreAdminService.GetStoreAdminList",Object(s["a"])("StoreAdminListQueryRequest",{token:Object(s["a"])("Token",{token:r.token}),storeroleid:t.id,count:100}))}),t.next=6,Promise.all(n);case 6:i=t.sent,e.storerolelistList.forEach(function(t,e){return t.storeadmincount=i[e].storeadminlistList.length}),this.list=e.storerolelistList;case 9:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),onEdit:function(t){var e=t.id;this.$router.push({name:"setting-role-edit",query:{id:e}})},onDelete:function(t){var e=this;this.$confirm("确认删除？").then(function(){Object(l["a"])("StoreStoreRoleService.DeleteStoreRole",Object(s["a"])("IDWithTokenRequest",{token:Object(s["a"])("Token",{token:e.token}),id:t.id})).then(function(n){e.list.splice(e.list.findIndex(function(e){return e.id===t.id}),1),e.$message({message:"操作成功",type:"success"})})}).catch(function(){})},addRole:function(){this.$router.push({name:"setting-role-edit"})}}},d=u,f=n("2877"),v=Object(f["a"])(d,i,r,!1,null,null,null);e["default"]=v.exports},a481:function(t,e,n){"use strict";var i=n("cb7c"),r=n("4bf8"),a=n("9def"),o=n("4588"),s=n("0390"),l=n("5f1b"),c=Math.max,u=Math.min,d=Math.floor,f=/\$([$&`']|\d\d?|<[^>]*>)/g,v=/\$([$&`']|\d\d?)/g,h=function(t){return void 0===t?t:String(t)};n("214f")("replace",2,function(t,e,n,b){return[function(i,r){var a=t(this),o=void 0==i?void 0:i[e];return void 0!==o?o.call(i,a,r):n.call(String(a),i,r)},function(t,e){var r=b(n,t,this,e);if(r.done)return r.value;var d=i(t),f=String(this),v="function"===typeof e;v||(e=String(e));var m=d.global;if(m){var g=d.unicode;d.lastIndex=0}var k=[];while(1){var S=l(d,f);if(null===S)break;if(k.push(S),!m)break;var w=String(S[0]);""===w&&(d.lastIndex=s(f,a(d.lastIndex),g))}for(var _="",y=0,x=0;x<k.length;x++){S=k[x];for(var j=String(S[0]),$=c(u(o(S.index),f.length),0),A=[],O=1;O<S.length;O++)A.push(h(S[O]));var R=S.groups;if(v){var L=[j].concat(A,$,f);void 0!==R&&L.push(R);var I=String(e.apply(void 0,L))}else I=p(j,f,$,A,R,e);$>=y&&(_+=f.slice(y,$)+I,y=$+j.length)}return _+f.slice(y)}];function p(t,e,i,a,o,s){var l=i+t.length,c=a.length,u=v;return void 0!==o&&(o=r(o),u=f),n.call(s,u,function(n,r){var s;switch(r.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,i);case"'":return e.slice(l);case"<":s=o[r.slice(1,-1)];break;default:var u=+r;if(0===u)return r;if(u>c){var f=d(u/10);return 0===f?r:f<=c?void 0===a[f-1]?r.charAt(1):a[f-1]+r.charAt(1):r}s=a[u-1]}return void 0===s?"":s})}})},ab1c:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"tab"},t._l(t.data,function(e){return n("div",{key:e.label,class:["tab-item",{active:t.value===e.value}],on:{click:function(n){t.onClickItem(e.value)}}},[t._v(t._s(e.label))])}))},r=[],a={props:{data:{type:Array,default:function(){return[{label:"test",value:0},{label:"test2",value:1}]},required:!0},value:{default:"",required:!0}},methods:{onClickItem:function(t){this.$emit("input",t)}}},o=a,s=(n("56ee"),n("2877")),l=Object(s["a"])(o,i,r,!1,null,"5e44c4ee",null);e["a"]=l.exports},bff6:function(t,e,n){}}]);
//# sourceMappingURL=setting-roles.1671a553.js.map