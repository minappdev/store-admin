(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["marketing-couponedit"],{"0e0c":function(t,e,o){},"1c0f":function(t,e,o){},2197:function(t,e,o){"use strict";var a=o("789f"),r=o.n(a);r.a},"2d75":function(t,e,o){"use strict";o.r(e);var a,r,l=o("80bf"),n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("div",{staticClass:"ml-l pl-l mb-l pb-l"},[o("el-button",{attrs:{size:"small"},on:{click:function(e){t.$router.back()}}},[t._v("返回")])],1),o("el-form",{ref:"form",attrs:{disabled:"edit"===t.$route.query.type,model:t.form,"label-position":"left","label-width":"80px",size:"small"}},[o("div",{staticClass:"container"},[o("h3",{staticClass:"title"},[t._v("新建优惠券模版")]),o("el-form-item",{attrs:{label:"名称"}},[o("el-col",{attrs:{span:"8"}},[o("el-input",{model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1)],1),o("el-form-item",{attrs:{label:"面值类型"}},[o("el-row",[o("el-col",{attrs:{span:"2"}},[o("el-radio",{attrs:{label:1},model:{value:t.form.amountkind,callback:function(e){t.$set(t.form,"amountkind",e)},expression:"form.amountkind"}},[t._v("指定金额")])],1),o("el-col",{directives:[{name:"show",rawName:"v-show",value:"1"==t.form.amountkind,expression:"form.amountkind == '1'"}],attrs:{span:"4"}},[o("el-input",{attrs:{placeholder:"请输入面值"},model:{value:t.form.amount,callback:function(e){t.$set(t.form,"amount",e)},expression:"form.amount"}},[o("template",{slot:"append"},[t._v("元")])],2)],1)],1),o("el-row",[o("el-col",{attrs:{span:"2"}},[o("el-radio",{attrs:{label:0},model:{value:t.form.amountkind,callback:function(e){t.$set(t.form,"amountkind",e)},expression:"form.amountkind"}},[t._v("随机金额")])],1),"0"==t.form.amountkind?[o("el-col",{attrs:{span:"4"}},[o("el-input",{attrs:{placeholder:"请输入最小面值"},model:{value:t.form.amountbegin,callback:function(e){t.$set(t.form,"amountbegin",e)},expression:"form.amountbegin"}},[o("template",{slot:"append"},[t._v("元")])],2)],1),o("el-col",{staticStyle:{"text-align":"center"},attrs:{span:"1"}},[t._v("-")]),o("el-col",{attrs:{span:"4"}},[o("el-input",{attrs:{placeholder:"请输入最大面值"},model:{value:t.form.amountend,callback:function(e){t.$set(t.form,"amountend",e)},expression:"form.amountend"}},[o("template",{slot:"append"},[t._v("元")])],2)],1)]:t._e()],2)],1),o("el-form-item",{attrs:{label:"有效时间"}},[o("el-row",[o("el-col",{attrs:{span:"2"}},[o("el-radio",{attrs:{label:0},model:{value:t.form.timekind,callback:function(e){t.$set(t.form,"timekind",e)},expression:"form.timekind"}},[t._v("不限制")])],1)],1),o("el-row",[o("el-col",{attrs:{span:"2"}},[o("el-radio",{attrs:{label:2},model:{value:t.form.timekind,callback:function(e){t.$set(t.form,"timekind",e)},expression:"form.timekind"}},[t._v("量化时间")])],1),"2"==t.form.timekind?[o("el-col",{attrs:{span:"4"}},[o("el-input",{attrs:{placeholder:"请输入有效天数"},model:{value:t.form.duration,callback:function(e){t.$set(t.form,"duration",e)},expression:"form.duration"}})],1),o("el-col",{staticStyle:{color:"#999","margin-left":"10px"},attrs:{span:"10"}},[t._v("例如有效时常30天，则在发布或领取后30天失效")])]:t._e()],2)],1),o("el-form-item",{staticClass:"form-item-reach-type",attrs:{label:"使用门槛"}},[o("el-row",[o("el-col",{attrs:{span:"4"}},[o("el-radio",{attrs:{label:0},model:{value:t.reachType,callback:function(e){t.reachType=e},expression:"reachType"}},[t._v("\n              满\n              "),o("el-input",{staticStyle:{width:"100px"},model:{value:t.form.reach,callback:function(e){t.$set(t.form,"reach",e)},expression:"form.reach"}},[o("template",{slot:"append"},[t._v("元")])],2),o("span",{staticStyle:{"margin-left":"5px"}},[t._v("可用")])],1)],1)],1),o("el-row",[o("el-col",{attrs:{span:"4"}},[o("el-radio",{attrs:{label:1},model:{value:t.reachType,callback:function(e){t.reachType=e},expression:"reachType"}},[t._v("不限制")])],1)],1)],1),o("el-form-item",{attrs:{label:"适用商品"}},[o("el-row",[o("el-col",{attrs:{span:"4"}},[o("el-radio",{attrs:{label:0},model:{value:t.form.producttype,callback:function(e){t.$set(t.form,"producttype",e)},expression:"form.producttype"}},[t._v("可用于所有商品")])],1)],1),o("el-row",[o("el-col",{attrs:{span:"4"}},[o("el-radio",{attrs:{label:1},model:{value:t.form.producttype,callback:function(e){t.$set(t.form,"producttype",e)},expression:"form.producttype"}},[t._v("可用于部分商品")])],1),"1"==t.form.producttype?[o("el-col",{staticClass:"product-select",attrs:{span:"9"}},[o("el-select",{staticStyle:{width:"100%"},attrs:{loading:t.fetchProductLoading,"remote-method":t.getProducts,filterable:"",multiple:"",placeholder:"选择商品",remote:""},model:{value:t.form.productidsList,callback:function(e){t.$set(t.form,"productidsList",e)},expression:"form.productidsList"}},t._l(t.products,function(t){return o("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1)]:t._e()],2),o("el-row",[o("el-col",{attrs:{span:"4"}},[o("el-radio",{attrs:{label:2},model:{value:t.form.producttype,callback:function(e){t.$set(t.form,"producttype",e)},expression:"form.producttype"}},[t._v("不可用于部分商品")])],1),"2"==t.form.producttype?[o("el-col",{attrs:{span:"4"}},[o("el-select",{attrs:{loading:t.fetchProductLoading,"remote-method":t.getProducts,filterable:"",multiple:"",placeholder:"选择商品",remote:""},model:{value:t.form.productidsList,callback:function(e){t.$set(t.form,"productidsList",e)},expression:"form.productidsList"}},t._l(t.products,function(t){return o("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1)]:t._e()],2)],1)],1),o("div",{staticClass:"container conponedit-button"},[o("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("创建")])],1)])],1)},s=[],i=o("e8e1"),c=o("8e44"),m=o("73cd"),u={data:function(){return{form:{name:"",reach:"",timekind:0,duration:"",categorytype:0,categoryidsList:[],producttype:0,productidsList:[],amountkind:1,amountbegin:"",amountend:"",amount:""},reachType:0,categories:[],products:[],fetchProductLoading:!1}},created:function(){var t=this;this.token=Object(m["e"])(),Object(c["a"])("StoreCategoryService.GetCategoryList",Object(i["a"])("CategoryListQueryRequest",{token:Object(i["a"])("Token",{token:this.token}),ishidden:2,level:2,count:100,sortby:1})).then(function(e){t.categories=e.categorylistList})},methods:{getProducts:function(t){var e=this;if(!t)return this.products=[];this.fetchProductLoading=!0,Object(c["a"])("StoreProductService.GetProductList",Object(i["a"])("ProductListQueryRequest",{token:Object(i["a"])("Token",{token:this.token}),name:t,isonline:1,sortby:1,sort:1,count:100})).then(function(t){e.products=t.productlistList,e.fetchProductLoading=!1})},onSubmit:function(){var t=this,e=JSON.parse(JSON.stringify(this.form));e.amountbegin=this.$amount2(this.form.amountbegin),e.amountend=this.$amount2(this.form.amountend),e.amount=this.$amount2(this.form.amount),e.reach=this.$amount2(this.form.reach),1==this.reachType&&(e.reach=0),e.duration=parseInt(60*e.duration*60*24),Object(c["a"])("StoreCouponTemplateService.CreateCouponTemplate",Object(i["a"])("CouponTemplateWithTokenRequest",{token:Object(i["a"])("Token",{token:this.token}),coupontemplate:Object(i["a"])("CouponTemplate",e)})).then(function(e){t.$router.back()})}}},d=u,p=(o("f9d0"),o("2877")),f=Object(p["a"])(d,n,s,!1,null,null,null),b=f.exports,h=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("div",{staticClass:"ml-l pl-l mb-l pb-l"},[o("el-button",{attrs:{size:"small"},on:{click:function(e){t.$router.back()}}},[t._v("返回")])],1),o("el-form",{ref:"form",attrs:{disabled:"edit"===t.$route.query.type,model:t.form,"label-position":"left","label-width":"80px",size:"small"}},[o("div",{staticClass:"container"},[o("h3",{staticClass:"title"},[t._v("新建优惠券模版")]),o("el-form-item",{attrs:{label:"名称"}},[o("el-col",{attrs:{span:"8"}},[o("el-input",{model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1)],1),o("el-form-item",{attrs:{label:"面值类型"}},[o("el-row",[o("el-col",{attrs:{span:"2"}},[o("el-radio",{attrs:{label:1},model:{value:t.form.amountkind,callback:function(e){t.$set(t.form,"amountkind",e)},expression:"form.amountkind"}},[t._v("指定金额")])],1),o("el-col",{directives:[{name:"show",rawName:"v-show",value:"1"==t.form.amountkind,expression:"form.amountkind == '1'"}],attrs:{span:"4"}},[o("el-input",{attrs:{placeholder:"请输入面值"},model:{value:t.form.amount,callback:function(e){t.$set(t.form,"amount",e)},expression:"form.amount"}},[o("template",{slot:"append"},[t._v("元")])],2)],1)],1),o("el-row",[o("el-col",{attrs:{span:"2"}},[o("el-radio",{attrs:{label:0},model:{value:t.form.amountkind,callback:function(e){t.$set(t.form,"amountkind",e)},expression:"form.amountkind"}},[t._v("随机金额")])],1),"0"==t.form.amountkind?[o("el-col",{attrs:{span:"4"}},[o("el-input",{attrs:{placeholder:"请输入最小面值"},model:{value:t.form.amountbegin,callback:function(e){t.$set(t.form,"amountbegin",e)},expression:"form.amountbegin"}},[o("template",{slot:"append"},[t._v("元")])],2)],1),o("el-col",{staticStyle:{"text-align":"center"},attrs:{span:"1"}},[t._v("-")]),o("el-col",{attrs:{span:"4"}},[o("el-input",{attrs:{placeholder:"请输入最大面值"},model:{value:t.form.amountend,callback:function(e){t.$set(t.form,"amountend",e)},expression:"form.amountend"}},[o("template",{slot:"append"},[t._v("元")])],2)],1)]:t._e()],2)],1),o("el-form-item",{attrs:{label:"有效时间"}},[o("el-row",[o("el-col",{attrs:{span:"2"}},[o("el-radio",{attrs:{label:0},model:{value:t.form.timekind,callback:function(e){t.$set(t.form,"timekind",e)},expression:"form.timekind"}},[t._v("不限制")])],1)],1),o("el-row",[o("el-col",{attrs:{span:"2"}},[o("el-radio",{attrs:{label:2},model:{value:t.form.timekind,callback:function(e){t.$set(t.form,"timekind",e)},expression:"form.timekind"}},[t._v("量化时间")])],1),"2"==t.form.timekind?[o("el-col",{attrs:{span:"4"}},[o("el-input",{attrs:{placeholder:"请输入有效天数"},model:{value:t.form.duration,callback:function(e){t.$set(t.form,"duration",e)},expression:"form.duration"}})],1),o("el-col",{staticStyle:{color:"#999","margin-left":"10px"},attrs:{span:"10"}},[t._v("例如有效时常30天，则在发布或领取后30天失效")])]:t._e()],2)],1),o("el-form-item",{staticClass:"form-item-reach-type",attrs:{label:"使用门槛"}},[o("el-row",[o("el-col",{attrs:{span:"4"}},[o("el-radio",{attrs:{label:0},model:{value:t.reachType,callback:function(e){t.reachType=e},expression:"reachType"}},[t._v("\n              满\n              "),o("el-input",{staticStyle:{width:"100px"},model:{value:t.form.reach,callback:function(e){t.$set(t.form,"reach",e)},expression:"form.reach"}},[o("template",{slot:"append"},[t._v("元")])],2),o("span",{staticStyle:{"margin-left":"5px"}},[t._v("可用")])],1)],1)],1),o("el-row",[o("el-col",{attrs:{span:"4"}},[o("el-radio",{attrs:{label:1},model:{value:t.reachType,callback:function(e){t.reachType=e},expression:"reachType"}},[t._v("不限制")])],1)],1)],1),o("el-form-item",{attrs:{label:"适用商品"}},[o("el-row",[o("el-col",{attrs:{span:"4"}},[o("el-radio",{attrs:{label:0},model:{value:t.form.producttype,callback:function(e){t.$set(t.form,"producttype",e)},expression:"form.producttype"}},[t._v("可用于所有商品")])],1)],1),o("el-row",[o("el-col",{attrs:{span:"4"}},[o("el-radio",{attrs:{label:1},model:{value:t.form.producttype,callback:function(e){t.$set(t.form,"producttype",e)},expression:"form.producttype"}},[t._v("可用于部分商品")])],1),"1"==t.form.producttype?[o("el-col",{staticClass:"product-select",attrs:{span:"9"}},[o("el-select",{staticStyle:{width:"100%"},attrs:{loading:t.fetchProductLoading,"remote-method":t.getProducts,filterable:"",multiple:"",placeholder:"选择商品",remote:""},model:{value:t.form.productidsList,callback:function(e){t.$set(t.form,"productidsList",e)},expression:"form.productidsList"}},t._l(t.products,function(t){return o("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1)]:t._e()],2),o("el-row",[o("el-col",{attrs:{span:"4"}},[o("el-radio",{attrs:{label:2},model:{value:t.form.producttype,callback:function(e){t.$set(t.form,"producttype",e)},expression:"form.producttype"}},[t._v("不可用于部分商品")])],1),"2"==t.form.producttype?[o("el-col",{attrs:{span:"4"}},[o("el-select",{attrs:{loading:t.fetchProductLoading,"remote-method":t.getProducts,filterable:"",multiple:"",placeholder:"选择商品",remote:""},model:{value:t.form.productidsList,callback:function(e){t.$set(t.form,"productidsList",e)},expression:"form.productidsList"}},t._l(t.products,function(t){return o("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1)]:t._e()],2)],1)],1),o("div",{staticClass:"container conponedit-button"},[o("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("创建")])],1)])],1)},k=[],v={data:function(){return{form:{name:"",reach:"",timekind:0,duration:"",categorytype:0,categoryidsList:[],producttype:0,productidsList:[],amountkind:1,amountbegin:"",amountend:"",amount:""},reachType:0,categories:[],products:[],fetchProductLoading:!1}},created:function(){var t=this;this.token=Object(m["e"])(),Object(c["a"])("StoreCategoryService.GetCategoryList",Object(i["a"])("CategoryListQueryRequest",{token:Object(i["a"])("Token",{token:this.token}),ishidden:2,level:1,count:100,sortby:1})).then(function(e){t.categories=e.categorylistList})},methods:{getProducts:function(t){var e=this;if(!t)return this.products=[];this.fetchProductLoading=!0,Object(c["a"])("StoreProductService.GetProductList",Object(i["a"])("ProductListQueryRequest",{token:Object(i["a"])("Token",{token:this.token}),name:t,isonline:1,sortby:1,sort:1,count:100})).then(function(t){e.products=t.productlistList,e.fetchProductLoading=!1})},onSubmit:function(){var t=this,e=JSON.parse(JSON.stringify(this.form));e.amountbegin=this.$amount2(this.form.amountbegin),e.amountend=this.$amount2(this.form.amountend),e.amount=this.$amount2(this.form.amount),e.reach=this.$amount2(this.form.reach),1==this.reachType&&(e.reach=0),e.duration=parseInt(60*e.duration*60*24),Object(c["a"])("StoreCouponTemplateService.CreateCouponTemplate",Object(i["a"])("CouponTemplateWithTokenRequest",{token:Object(i["a"])("Token",{token:this.token}),coupontemplate:Object(i["a"])("CouponTemplate",e)})).then(function(e){t.$router.back()})}}},y=v,_=(o("3fe0"),Object(p["a"])(y,h,k,!1,null,null,null)),g=_.exports,x=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("div",{staticClass:"ml-l pl-l mb-l pb-l"},[o("el-button",{attrs:{size:"small"},on:{click:function(e){t.$router.back()}}},[t._v("返回")])],1),o("el-form",{ref:"form",attrs:{disabled:"edit"===t.$route.query.type,model:t.form,"label-position":"left","label-width":"80px",size:"small"}},[o("div",{staticClass:"container"},[o("h3",{staticClass:"title"},[t._v("新建优惠券模版")]),o("el-form-item",{attrs:{label:"名称"}},[o("el-col",{attrs:{span:"8"}},[o("el-input",{model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1)],1),o("el-form-item",{attrs:{label:"面值类型"}},[o("el-row",[o("el-col",{attrs:{span:"2"}},[o("el-radio",{attrs:{label:1},model:{value:t.form.amountkind,callback:function(e){t.$set(t.form,"amountkind",e)},expression:"form.amountkind"}},[t._v("指定金额")])],1),o("el-col",{directives:[{name:"show",rawName:"v-show",value:"1"==t.form.amountkind,expression:"form.amountkind == '1'"}],attrs:{span:"4"}},[o("el-input",{attrs:{placeholder:"请输入面值"},model:{value:t.form.amount,callback:function(e){t.$set(t.form,"amount",e)},expression:"form.amount"}},[o("template",{slot:"append"},[t._v("元")])],2)],1)],1),o("el-row",[o("el-col",{attrs:{span:"2"}},[o("el-radio",{attrs:{label:0},model:{value:t.form.amountkind,callback:function(e){t.$set(t.form,"amountkind",e)},expression:"form.amountkind"}},[t._v("随机金额")])],1),"0"==t.form.amountkind?[o("el-col",{attrs:{span:"4"}},[o("el-input",{attrs:{placeholder:"请输入最小面值"},model:{value:t.form.amountbegin,callback:function(e){t.$set(t.form,"amountbegin",e)},expression:"form.amountbegin"}},[o("template",{slot:"append"},[t._v("元")])],2)],1),o("el-col",{staticStyle:{"text-align":"center"},attrs:{span:"1"}},[t._v("-")]),o("el-col",{attrs:{span:"4"}},[o("el-input",{attrs:{placeholder:"请输入最大面值"},model:{value:t.form.amountend,callback:function(e){t.$set(t.form,"amountend",e)},expression:"form.amountend"}},[o("template",{slot:"append"},[t._v("元")])],2)],1)]:t._e()],2)],1),o("el-form-item",{attrs:{label:"有效时间"}},[o("el-row",[o("el-col",{attrs:{span:"2"}},[o("el-radio",{attrs:{label:0},model:{value:t.form.timekind,callback:function(e){t.$set(t.form,"timekind",e)},expression:"form.timekind"}},[t._v("不限制")])],1)],1),o("el-row",[o("el-col",{attrs:{span:"2"}},[o("el-radio",{attrs:{label:2},model:{value:t.form.timekind,callback:function(e){t.$set(t.form,"timekind",e)},expression:"form.timekind"}},[t._v("量化时间")])],1),"2"==t.form.timekind?[o("el-col",{attrs:{span:"4"}},[o("el-input",{attrs:{placeholder:"请输入有效天数"},model:{value:t.form.duration,callback:function(e){t.$set(t.form,"duration",e)},expression:"form.duration"}})],1),o("el-col",{staticStyle:{color:"#999","margin-left":"10px"},attrs:{span:"10"}},[t._v("例如有效时常30天，则在发布或领取后30天失效")])]:t._e()],2)],1),o("el-form-item",{staticClass:"form-item-reach-type",attrs:{label:"使用门槛"}},[o("el-row",[o("el-col",{attrs:{span:"4"}},[o("el-radio",{attrs:{label:0},model:{value:t.reachType,callback:function(e){t.reachType=e},expression:"reachType"}},[t._v("\n              满\n              "),o("el-input",{staticStyle:{width:"100px"},model:{value:t.form.reach,callback:function(e){t.$set(t.form,"reach",e)},expression:"form.reach"}},[o("template",{slot:"append"},[t._v("元")])],2),o("span",{staticStyle:{"margin-left":"5px"}},[t._v("可用")])],1)],1)],1),o("el-row",[o("el-col",{attrs:{span:"4"}},[o("el-radio",{attrs:{label:1},model:{value:t.reachType,callback:function(e){t.reachType=e},expression:"reachType"}},[t._v("不限制")])],1)],1)],1),o("el-form-item",{attrs:{label:"适用商品"}},[o("el-row",[o("el-col",{attrs:{span:"4"}},[o("el-radio",{attrs:{label:0},model:{value:t.form.producttype,callback:function(e){t.$set(t.form,"producttype",e)},expression:"form.producttype"}},[t._v("可用于所有商品")])],1)],1),o("el-row",[o("el-col",{attrs:{span:"4"}},[o("el-radio",{attrs:{label:1},model:{value:t.form.producttype,callback:function(e){t.$set(t.form,"producttype",e)},expression:"form.producttype"}},[t._v("可用于部分商品")])],1),"1"==t.form.producttype?[o("el-col",{staticClass:"product-select",attrs:{span:"9"}},[o("el-select",{staticStyle:{width:"100%"},attrs:{loading:t.fetchProductLoading,"remote-method":t.getProducts,filterable:"",multiple:"",placeholder:"选择商品",remote:""},model:{value:t.form.productidsList,callback:function(e){t.$set(t.form,"productidsList",e)},expression:"form.productidsList"}},t._l(t.products,function(t){return o("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1)]:t._e()],2),o("el-row",[o("el-col",{attrs:{span:"4"}},[o("el-radio",{attrs:{label:2},model:{value:t.form.producttype,callback:function(e){t.$set(t.form,"producttype",e)},expression:"form.producttype"}},[t._v("不可用于部分商品")])],1),"2"==t.form.producttype?[o("el-col",{attrs:{span:"4"}},[o("el-select",{attrs:{loading:t.fetchProductLoading,"remote-method":t.getProducts,filterable:"",multiple:"",placeholder:"选择商品",remote:""},model:{value:t.form.productidsList,callback:function(e){t.$set(t.form,"productidsList",e)},expression:"form.productidsList"}},t._l(t.products,function(t){return o("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1)]:t._e()],2)],1)],1),o("div",{staticClass:"container conponedit-button"},[o("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("创建")])],1)])],1)},$=[],L={data:function(){return{form:{name:"",reach:"",timekind:0,duration:"",categorytype:0,categoryidsList:[],producttype:0,productidsList:[],amountkind:1,amountbegin:"",amountend:"",amount:""},reachType:0,categories:[],products:[],fetchProductLoading:!1}},created:function(){var t=this;this.token=Object(m["e"])(),Object(c["a"])("StoreCategoryService.GetCategoryList",Object(i["a"])("CategoryListQueryRequest",{token:Object(i["a"])("Token",{token:this.token}),ishidden:2,level:2,count:100,sortby:1})).then(function(e){t.categories=e.categorylistList})},methods:{getProducts:function(t){var e=this;if(!t)return this.products=[];this.fetchProductLoading=!0,Object(c["a"])("StoreProductService.GetProductList",Object(i["a"])("ProductListQueryRequest",{token:Object(i["a"])("Token",{token:this.token}),name:t,isonline:1,sortby:1,sort:1,count:100})).then(function(t){e.products=t.productlistList,e.fetchProductLoading=!1})},onSubmit:function(){var t=this,e=JSON.parse(JSON.stringify(this.form));e.amountbegin=this.$amount2(this.form.amountbegin),e.amountend=this.$amount2(this.form.amountend),e.amount=this.$amount2(this.form.amount),e.reach=this.$amount2(this.form.reach),1==this.reachType&&(e.reach=0),e.duration=parseInt(60*e.duration*60*24),Object(c["a"])("StoreCouponTemplateService.CreateCouponTemplate",Object(i["a"])("CouponTemplateWithTokenRequest",{token:Object(i["a"])("Token",{token:this.token}),coupontemplate:Object(i["a"])("CouponTemplate",e)})).then(function(e){t.$router.back()})}}},w=L,T=(o("7c8f"),Object(p["a"])(w,x,$,!1,null,null,null)),S=T.exports,O=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("div",{staticClass:"ml-l pl-l mb-l pb-l"},[o("el-button",{attrs:{size:"small"},on:{click:function(e){t.$router.back()}}},[t._v("返回")])],1),o("el-form",{ref:"form",attrs:{disabled:"edit"===t.$route.query.type,model:t.form,"label-position":"left","label-width":"80px",size:"small"}},[o("div",{staticClass:"container"},[o("h3",{staticClass:"title"},[t._v("新建优惠券模版")]),o("el-form-item",{attrs:{label:"名称"}},[o("el-col",{attrs:{span:"8"}},[o("el-input",{model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1)],1),o("el-form-item",{attrs:{label:"面值类型"}},[o("el-row",[o("el-col",{attrs:{span:"2"}},[o("el-radio",{attrs:{label:1},model:{value:t.form.amountkind,callback:function(e){t.$set(t.form,"amountkind",e)},expression:"form.amountkind"}},[t._v("指定金额")])],1),o("el-col",{directives:[{name:"show",rawName:"v-show",value:"1"==t.form.amountkind,expression:"form.amountkind == '1'"}],attrs:{span:"4"}},[o("el-input",{attrs:{placeholder:"请输入面值"},model:{value:t.form.amount,callback:function(e){t.$set(t.form,"amount",e)},expression:"form.amount"}},[o("template",{slot:"append"},[t._v("元")])],2)],1)],1),o("el-row",[o("el-col",{attrs:{span:"2"}},[o("el-radio",{attrs:{label:0},model:{value:t.form.amountkind,callback:function(e){t.$set(t.form,"amountkind",e)},expression:"form.amountkind"}},[t._v("随机金额")])],1),"0"==t.form.amountkind?[o("el-col",{attrs:{span:"4"}},[o("el-input",{attrs:{placeholder:"请输入最小面值"},model:{value:t.form.amountbegin,callback:function(e){t.$set(t.form,"amountbegin",e)},expression:"form.amountbegin"}},[o("template",{slot:"append"},[t._v("元")])],2)],1),o("el-col",{staticStyle:{"text-align":"center"},attrs:{span:"1"}},[t._v("-")]),o("el-col",{attrs:{span:"4"}},[o("el-input",{attrs:{placeholder:"请输入最大面值"},model:{value:t.form.amountend,callback:function(e){t.$set(t.form,"amountend",e)},expression:"form.amountend"}},[o("template",{slot:"append"},[t._v("元")])],2)],1)]:t._e()],2)],1),o("el-form-item",{attrs:{label:"有效时间"}},[o("el-row",[o("el-col",{attrs:{span:"2"}},[o("el-radio",{attrs:{label:0},model:{value:t.form.timekind,callback:function(e){t.$set(t.form,"timekind",e)},expression:"form.timekind"}},[t._v("不限制")])],1)],1),o("el-row",[o("el-col",{attrs:{span:"2"}},[o("el-radio",{attrs:{label:2},model:{value:t.form.timekind,callback:function(e){t.$set(t.form,"timekind",e)},expression:"form.timekind"}},[t._v("量化时间")])],1),"2"==t.form.timekind?[o("el-col",{attrs:{span:"4"}},[o("el-input",{attrs:{placeholder:"请输入有效天数"},model:{value:t.form.duration,callback:function(e){t.$set(t.form,"duration",e)},expression:"form.duration"}})],1),o("el-col",{staticStyle:{color:"#999","margin-left":"10px"},attrs:{span:"10"}},[t._v("例如有效时常30天，则在发布或领取后30天失效")])]:t._e()],2)],1),o("el-form-item",{staticClass:"form-item-reach-type",attrs:{label:"使用门槛"}},[o("el-row",[o("el-col",{attrs:{span:"4"}},[o("el-radio",{attrs:{label:0},model:{value:t.reachType,callback:function(e){t.reachType=e},expression:"reachType"}},[t._v("\n              满\n              "),o("el-input",{staticStyle:{width:"100px"},model:{value:t.form.reach,callback:function(e){t.$set(t.form,"reach",e)},expression:"form.reach"}},[o("template",{slot:"append"},[t._v("元")])],2),o("span",{staticStyle:{"margin-left":"5px"}},[t._v("可用")])],1)],1)],1),o("el-row",[o("el-col",{attrs:{span:"4"}},[o("el-radio",{attrs:{label:1},model:{value:t.reachType,callback:function(e){t.reachType=e},expression:"reachType"}},[t._v("不限制")])],1)],1)],1),o("el-form-item",{attrs:{label:"适用商品"}},[o("el-row",[o("el-col",{attrs:{span:"4"}},[o("el-radio",{attrs:{label:0},model:{value:t.form.producttype,callback:function(e){t.$set(t.form,"producttype",e)},expression:"form.producttype"}},[t._v("可用于所有商品")])],1)],1),o("el-row",[o("el-col",{attrs:{span:"4"}},[o("el-radio",{attrs:{label:1},model:{value:t.form.producttype,callback:function(e){t.$set(t.form,"producttype",e)},expression:"form.producttype"}},[t._v("可用于部分商品")])],1),"1"==t.form.producttype?[o("el-col",{staticClass:"product-select",attrs:{span:"9"}},[o("el-select",{staticStyle:{width:"100%"},attrs:{loading:t.fetchProductLoading,"remote-method":t.getProducts,filterable:"",multiple:"",placeholder:"选择商品",remote:""},model:{value:t.form.productidsList,callback:function(e){t.$set(t.form,"productidsList",e)},expression:"form.productidsList"}},t._l(t.products,function(t){return o("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1)]:t._e()],2),o("el-row",[o("el-col",{attrs:{span:"4"}},[o("el-radio",{attrs:{label:2},model:{value:t.form.producttype,callback:function(e){t.$set(t.form,"producttype",e)},expression:"form.producttype"}},[t._v("不可用于部分商品")])],1),"2"==t.form.producttype?[o("el-col",{attrs:{span:"4"}},[o("el-select",{attrs:{loading:t.fetchProductLoading,"remote-method":t.getProducts,filterable:"",multiple:"",placeholder:"选择商品",remote:""},model:{value:t.form.productidsList,callback:function(e){t.$set(t.form,"productidsList",e)},expression:"form.productidsList"}},t._l(t.products,function(t){return o("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1)]:t._e()],2)],1)],1),o("div",{staticClass:"container conponedit-button"},[o("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("创建")])],1)])],1)},C=[],j={data:function(){return{form:{name:"",reach:"",timekind:0,duration:"",categorytype:0,categoryidsList:[],producttype:0,productidsList:[],amountkind:1,amountbegin:"",amountend:"",amount:""},reachType:0,categories:[],products:[],fetchProductLoading:!1}},created:function(){var t=this;this.token=Object(m["e"])(),Object(c["a"])("StoreCategoryService.GetCategoryList",Object(i["a"])("CategoryListQueryRequest",{token:Object(i["a"])("Token",{token:this.token}),ishidden:2,level:1,count:100,sortby:1})).then(function(e){t.categories=e.categorylistList})},methods:{getProducts:function(t){var e=this;if(!t)return this.products=[];this.fetchProductLoading=!0,Object(c["a"])("StoreProductService.GetProductList",Object(i["a"])("ProductListQueryRequest",{token:Object(i["a"])("Token",{token:this.token}),name:t,isonline:1,sortby:1,sort:1,count:100})).then(function(t){e.products=t.productlistList,e.fetchProductLoading=!1})},onSubmit:function(){var t=this,e=JSON.parse(JSON.stringify(this.form));e.amountbegin=this.$amount2(this.form.amountbegin),e.amountend=this.$amount2(this.form.amountend),e.amount=this.$amount2(this.form.amount),e.reach=this.$amount2(this.form.reach),1==this.reachType&&(e.reach=0),e.duration=parseInt(60*e.duration*60*24),Object(c["a"])("StoreCouponTemplateService.CreateCouponTemplate",Object(i["a"])("CouponTemplateWithTokenRequest",{token:Object(i["a"])("Token",{token:this.token}),coupontemplate:Object(i["a"])("CouponTemplate",e)})).then(function(e){t.$router.back()})}}},P=j,q=(o("8058"),Object(p["a"])(P,O,C,!1,null,null,null)),R=q.exports,N=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("div",{staticClass:"ml-l pl-l mb-l pb-l"},[o("el-button",{attrs:{size:"small"},on:{click:function(e){t.$router.back()}}},[t._v("返回")])],1),o("el-form",{ref:"form",attrs:{disabled:"edit"===t.$route.query.type,model:t.form,"label-position":"left","label-width":"80px",size:"small"}},[o("div",{staticClass:"container"},[o("h3",{staticClass:"title"},[t._v("新建优惠券模版")]),o("el-form-item",{attrs:{label:"名称"}},[o("el-col",{attrs:{span:"8"}},[o("el-input",{model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1)],1),o("el-form-item",{attrs:{label:"面值类型"}},[o("el-row",[o("el-col",{attrs:{span:"2"}},[o("el-radio",{attrs:{label:1},model:{value:t.form.amountkind,callback:function(e){t.$set(t.form,"amountkind",e)},expression:"form.amountkind"}},[t._v("指定金额")])],1),o("el-col",{directives:[{name:"show",rawName:"v-show",value:"1"==t.form.amountkind,expression:"form.amountkind == '1'"}],attrs:{span:"4"}},[o("el-input",{attrs:{placeholder:"请输入面值"},model:{value:t.form.amount,callback:function(e){t.$set(t.form,"amount",e)},expression:"form.amount"}},[o("template",{slot:"append"},[t._v("元")])],2)],1)],1),o("el-row",[o("el-col",{attrs:{span:"2"}},[o("el-radio",{attrs:{label:0},model:{value:t.form.amountkind,callback:function(e){t.$set(t.form,"amountkind",e)},expression:"form.amountkind"}},[t._v("随机金额")])],1),"0"==t.form.amountkind?[o("el-col",{attrs:{span:"4"}},[o("el-input",{attrs:{placeholder:"请输入最小面值"},model:{value:t.form.amountbegin,callback:function(e){t.$set(t.form,"amountbegin",e)},expression:"form.amountbegin"}},[o("template",{slot:"append"},[t._v("元")])],2)],1),o("el-col",{staticStyle:{"text-align":"center"},attrs:{span:"1"}},[t._v("-")]),o("el-col",{attrs:{span:"4"}},[o("el-input",{attrs:{placeholder:"请输入最大面值"},model:{value:t.form.amountend,callback:function(e){t.$set(t.form,"amountend",e)},expression:"form.amountend"}},[o("template",{slot:"append"},[t._v("元")])],2)],1)]:t._e()],2)],1),o("el-form-item",{attrs:{label:"有效时间"}},[o("el-row",[o("el-col",{attrs:{span:"2"}},[o("el-radio",{attrs:{label:0},model:{value:t.form.timekind,callback:function(e){t.$set(t.form,"timekind",e)},expression:"form.timekind"}},[t._v("不限制")])],1)],1),o("el-row",[o("el-col",{attrs:{span:"2"}},[o("el-radio",{attrs:{label:2},model:{value:t.form.timekind,callback:function(e){t.$set(t.form,"timekind",e)},expression:"form.timekind"}},[t._v("量化时间")])],1),"2"==t.form.timekind?[o("el-col",{attrs:{span:"4"}},[o("el-input",{attrs:{placeholder:"请输入有效天数"},model:{value:t.form.duration,callback:function(e){t.$set(t.form,"duration",e)},expression:"form.duration"}})],1),o("el-col",{staticStyle:{color:"#999","margin-left":"10px"},attrs:{span:"10"}},[t._v("例如有效时常30天，则在发布或领取后30天失效")])]:t._e()],2)],1),o("el-form-item",{staticClass:"form-item-reach-type",attrs:{label:"使用门槛"}},[o("el-row",[o("el-col",{attrs:{span:"4"}},[o("el-radio",{attrs:{label:0},model:{value:t.reachType,callback:function(e){t.reachType=e},expression:"reachType"}},[t._v("\n              满\n              "),o("el-input",{staticStyle:{width:"100px"},model:{value:t.form.reach,callback:function(e){t.$set(t.form,"reach",e)},expression:"form.reach"}},[o("template",{slot:"append"},[t._v("元")])],2),o("span",{staticStyle:{"margin-left":"5px"}},[t._v("可用")])],1)],1)],1),o("el-row",[o("el-col",{attrs:{span:"4"}},[o("el-radio",{attrs:{label:1},model:{value:t.reachType,callback:function(e){t.reachType=e},expression:"reachType"}},[t._v("不限制")])],1)],1)],1),o("el-form-item",{attrs:{label:"适用商品"}},[o("el-row",[o("el-col",{attrs:{span:"4"}},[o("el-radio",{attrs:{label:0},model:{value:t.form.producttype,callback:function(e){t.$set(t.form,"producttype",e)},expression:"form.producttype"}},[t._v("可用于所有商品")])],1)],1),o("el-row",[o("el-col",{attrs:{span:"4"}},[o("el-radio",{attrs:{label:1},model:{value:t.form.producttype,callback:function(e){t.$set(t.form,"producttype",e)},expression:"form.producttype"}},[t._v("可用于部分商品")])],1),"1"==t.form.producttype?[o("el-col",{staticClass:"product-select",attrs:{span:"9"}},[o("el-select",{staticStyle:{width:"100%"},attrs:{loading:t.fetchProductLoading,"remote-method":t.getProducts,filterable:"",multiple:"",placeholder:"选择商品",remote:""},model:{value:t.form.productidsList,callback:function(e){t.$set(t.form,"productidsList",e)},expression:"form.productidsList"}},t._l(t.products,function(t){return o("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1)]:t._e()],2),o("el-row",[o("el-col",{attrs:{span:"4"}},[o("el-radio",{attrs:{label:2},model:{value:t.form.producttype,callback:function(e){t.$set(t.form,"producttype",e)},expression:"form.producttype"}},[t._v("不可用于部分商品")])],1),"2"==t.form.producttype?[o("el-col",{attrs:{span:"4"}},[o("el-select",{attrs:{loading:t.fetchProductLoading,"remote-method":t.getProducts,filterable:"",multiple:"",placeholder:"选择商品",remote:""},model:{value:t.form.productidsList,callback:function(e){t.$set(t.form,"productidsList",e)},expression:"form.productidsList"}},t._l(t.products,function(t){return o("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1)]:t._e()],2)],1)],1),o("div",{staticClass:"container conponedit-button"},[o("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("创建")])],1)])],1)},J=[],z={data:function(){return{form:{name:"",reach:"",timekind:0,duration:"",categorytype:0,categoryidsList:[],producttype:0,productidsList:[],amountkind:1,amountbegin:"",amountend:"",amount:""},reachType:0,categories:[],products:[],fetchProductLoading:!1}},created:function(){var t=this;this.token=Object(m["e"])(),Object(c["a"])("StoreCategoryService.GetCategoryList",Object(i["a"])("CategoryListQueryRequest",{token:Object(i["a"])("Token",{token:this.token}),ishidden:2,level:2,count:100,sortby:1})).then(function(e){t.categories=e.categorylistList})},methods:{getProducts:function(t){var e=this;if(!t)return this.products=[];this.fetchProductLoading=!0,Object(c["a"])("StoreProductService.GetProductList",Object(i["a"])("ProductListQueryRequest",{token:Object(i["a"])("Token",{token:this.token}),name:t,isonline:1,sortby:1,sort:1,count:100})).then(function(t){e.products=t.productlistList,e.fetchProductLoading=!1})},onSubmit:function(){var t=this,e=JSON.parse(JSON.stringify(this.form));e.amountbegin=this.$amount2(this.form.amountbegin),e.amountend=this.$amount2(this.form.amountend),e.amount=this.$amount2(this.form.amount),e.reach=this.$amount2(this.form.reach),1==this.reachType&&(e.reach=0),e.duration=parseInt(60*e.duration*60*24),Object(c["a"])("StoreCouponTemplateService.CreateCouponTemplate",Object(i["a"])("CouponTemplateWithTokenRequest",{token:Object(i["a"])("Token",{token:this.token}),coupontemplate:Object(i["a"])("CouponTemplate",e)})).then(function(e){t.$router.back()})}}},G=z,Q=(o("f972"),Object(p["a"])(G,N,J,!1,null,null,null)),E=Q.exports,I=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("div",{staticClass:"ml-l pl-l mb-l pb-l"},[o("el-button",{attrs:{size:"small"},on:{click:function(e){t.$router.back()}}},[t._v("返回")])],1),o("el-form",{ref:"form",attrs:{disabled:"edit"===t.$route.query.type,model:t.form,"label-position":"left","label-width":"80px",size:"small"}},[o("div",{staticClass:"container"},[o("h3",{staticClass:"title"},[t._v("新建优惠券模版")]),o("el-form-item",{attrs:{label:"名称"}},[o("el-col",{attrs:{span:"8"}},[o("el-input",{model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1)],1),o("el-form-item",{attrs:{label:"面值类型"}},[o("el-row",[o("el-col",{attrs:{span:"2"}},[o("el-radio",{attrs:{label:1},model:{value:t.form.amountkind,callback:function(e){t.$set(t.form,"amountkind",e)},expression:"form.amountkind"}},[t._v("指定金额")])],1),o("el-col",{directives:[{name:"show",rawName:"v-show",value:"1"==t.form.amountkind,expression:"form.amountkind == '1'"}],attrs:{span:"4"}},[o("el-input",{attrs:{placeholder:"请输入面值"},model:{value:t.form.amount,callback:function(e){t.$set(t.form,"amount",e)},expression:"form.amount"}},[o("template",{slot:"append"},[t._v("元")])],2)],1)],1),o("el-row",[o("el-col",{attrs:{span:"2"}},[o("el-radio",{attrs:{label:0},model:{value:t.form.amountkind,callback:function(e){t.$set(t.form,"amountkind",e)},expression:"form.amountkind"}},[t._v("随机金额")])],1),"0"==t.form.amountkind?[o("el-col",{attrs:{span:"4"}},[o("el-input",{attrs:{placeholder:"请输入最小面值"},model:{value:t.form.amountbegin,callback:function(e){t.$set(t.form,"amountbegin",e)},expression:"form.amountbegin"}},[o("template",{slot:"append"},[t._v("元")])],2)],1),o("el-col",{staticStyle:{"text-align":"center"},attrs:{span:"1"}},[t._v("-")]),o("el-col",{attrs:{span:"4"}},[o("el-input",{attrs:{placeholder:"请输入最大面值"},model:{value:t.form.amountend,callback:function(e){t.$set(t.form,"amountend",e)},expression:"form.amountend"}},[o("template",{slot:"append"},[t._v("元")])],2)],1)]:t._e()],2)],1),o("el-form-item",{attrs:{label:"有效时间"}},[o("el-row",[o("el-col",{attrs:{span:"2"}},[o("el-radio",{attrs:{label:0},model:{value:t.form.timekind,callback:function(e){t.$set(t.form,"timekind",e)},expression:"form.timekind"}},[t._v("不限制")])],1)],1),o("el-row",[o("el-col",{attrs:{span:"2"}},[o("el-radio",{attrs:{label:2},model:{value:t.form.timekind,callback:function(e){t.$set(t.form,"timekind",e)},expression:"form.timekind"}},[t._v("量化时间")])],1),"2"==t.form.timekind?[o("el-col",{attrs:{span:"4"}},[o("el-input",{attrs:{placeholder:"请输入有效天数"},model:{value:t.form.duration,callback:function(e){t.$set(t.form,"duration",e)},expression:"form.duration"}})],1),o("el-col",{staticStyle:{color:"#999","margin-left":"10px"},attrs:{span:"10"}},[t._v("例如有效时常30天，则在发布或领取后30天失效")])]:t._e()],2)],1),o("el-form-item",{staticClass:"form-item-reach-type",attrs:{label:"使用门槛"}},[o("el-row",[o("el-col",{attrs:{span:"4"}},[o("el-radio",{attrs:{label:0},model:{value:t.reachType,callback:function(e){t.reachType=e},expression:"reachType"}},[t._v("\n              满\n              "),o("el-input",{staticStyle:{width:"100px"},model:{value:t.form.reach,callback:function(e){t.$set(t.form,"reach",e)},expression:"form.reach"}},[o("template",{slot:"append"},[t._v("元")])],2),o("span",{staticStyle:{"margin-left":"5px"}},[t._v("可用")])],1)],1)],1),o("el-row",[o("el-col",{attrs:{span:"4"}},[o("el-radio",{attrs:{label:1},model:{value:t.reachType,callback:function(e){t.reachType=e},expression:"reachType"}},[t._v("不限制")])],1)],1)],1),o("el-form-item",{attrs:{label:"适用商品"}},[o("el-row",[o("el-col",{attrs:{span:"4"}},[o("el-radio",{attrs:{label:0},model:{value:t.form.producttype,callback:function(e){t.$set(t.form,"producttype",e)},expression:"form.producttype"}},[t._v("可用于所有商品")])],1)],1),o("el-row",[o("el-col",{attrs:{span:"4"}},[o("el-radio",{attrs:{label:1},model:{value:t.form.producttype,callback:function(e){t.$set(t.form,"producttype",e)},expression:"form.producttype"}},[t._v("可用于部分商品")])],1),"1"==t.form.producttype?[o("el-col",{staticClass:"product-select",attrs:{span:"9"}},[o("el-select",{staticStyle:{width:"100%"},attrs:{loading:t.fetchProductLoading,"remote-method":t.getProducts,filterable:"",multiple:"",placeholder:"选择商品",remote:""},model:{value:t.form.productidsList,callback:function(e){t.$set(t.form,"productidsList",e)},expression:"form.productidsList"}},t._l(t.products,function(t){return o("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1)]:t._e()],2),o("el-row",[o("el-col",{attrs:{span:"4"}},[o("el-radio",{attrs:{label:2},model:{value:t.form.producttype,callback:function(e){t.$set(t.form,"producttype",e)},expression:"form.producttype"}},[t._v("不可用于部分商品")])],1),"2"==t.form.producttype?[o("el-col",{attrs:{span:"4"}},[o("el-select",{attrs:{loading:t.fetchProductLoading,"remote-method":t.getProducts,filterable:"",multiple:"",placeholder:"选择商品",remote:""},model:{value:t.form.productidsList,callback:function(e){t.$set(t.form,"productidsList",e)},expression:"form.productidsList"}},t._l(t.products,function(t){return o("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1)]:t._e()],2)],1)],1),o("div",{staticClass:"container conponedit-button"},[o("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("创建")])],1)])],1)},W=[],A={data:function(){return{form:{name:"",reach:"",timekind:0,duration:"",categorytype:0,categoryidsList:[],producttype:0,productidsList:[],amountkind:1,amountbegin:"",amountend:"",amount:""},reachType:0,categories:[],products:[],fetchProductLoading:!1}},created:function(){var t=this;this.token=Object(m["e"])(),Object(c["a"])("StoreCategoryService.GetCategoryList",Object(i["a"])("CategoryListQueryRequest",{token:Object(i["a"])("Token",{token:this.token}),ishidden:2,level:1,count:100,sortby:1})).then(function(e){t.categories=e.categorylistList})},methods:{getProducts:function(t){var e=this;if(!t)return this.products=[];this.fetchProductLoading=!0,Object(c["a"])("StoreProductService.GetProductList",Object(i["a"])("ProductListQueryRequest",{token:Object(i["a"])("Token",{token:this.token}),name:t,isonline:1,sortby:1,sort:1,count:100})).then(function(t){e.products=t.productlistList,e.fetchProductLoading=!1})},onSubmit:function(){var t=this,e=JSON.parse(JSON.stringify(this.form));e.amountbegin=this.$amount2(this.form.amountbegin),e.amountend=this.$amount2(this.form.amountend),e.amount=this.$amount2(this.form.amount),e.reach=this.$amount2(this.form.reach),1==this.reachType&&(e.reach=0),e.duration=parseInt(60*e.duration*60*24),Object(c["a"])("StoreCouponTemplateService.CreateCouponTemplate",Object(i["a"])("CouponTemplateWithTokenRequest",{token:Object(i["a"])("Token",{token:this.token}),coupontemplate:Object(i["a"])("CouponTemplate",e)})).then(function(e){t.$router.back()})}}},B=A,D=(o("2197"),Object(p["a"])(B,I,W,!1,null,null,null)),F=D.exports,H=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("div",{staticClass:"ml-l pl-l mb-l pb-l"},[o("el-button",{attrs:{size:"small"},on:{click:function(e){t.$router.back()}}},[t._v("返回")])],1),o("el-form",{ref:"form",attrs:{disabled:"edit"===t.$route.query.type,model:t.form,"label-position":"left","label-width":"80px",size:"small"}},[o("div",{staticClass:"container"},[o("h3",{staticClass:"title"},[t._v("新建优惠券模版")]),o("el-form-item",{attrs:{label:"名称"}},[o("el-col",{attrs:{span:"8"}},[o("el-input",{model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1)],1),o("el-form-item",{attrs:{label:"面值类型"}},[o("el-row",[o("el-col",{attrs:{span:"2"}},[o("el-radio",{attrs:{label:1},model:{value:t.form.amountkind,callback:function(e){t.$set(t.form,"amountkind",e)},expression:"form.amountkind"}},[t._v("指定金额")])],1),o("el-col",{directives:[{name:"show",rawName:"v-show",value:"1"==t.form.amountkind,expression:"form.amountkind == '1'"}],attrs:{span:"4"}},[o("el-input",{attrs:{placeholder:"请输入面值"},model:{value:t.form.amount,callback:function(e){t.$set(t.form,"amount",e)},expression:"form.amount"}},[o("template",{slot:"append"},[t._v("元")])],2)],1)],1),o("el-row",[o("el-col",{attrs:{span:"2"}},[o("el-radio",{attrs:{label:0},model:{value:t.form.amountkind,callback:function(e){t.$set(t.form,"amountkind",e)},expression:"form.amountkind"}},[t._v("随机金额")])],1),"0"==t.form.amountkind?[o("el-col",{attrs:{span:"4"}},[o("el-input",{attrs:{placeholder:"请输入最小面值"},model:{value:t.form.amountbegin,callback:function(e){t.$set(t.form,"amountbegin",e)},expression:"form.amountbegin"}},[o("template",{slot:"append"},[t._v("元")])],2)],1),o("el-col",{staticStyle:{"text-align":"center"},attrs:{span:"1"}},[t._v("-")]),o("el-col",{attrs:{span:"4"}},[o("el-input",{attrs:{placeholder:"请输入最大面值"},model:{value:t.form.amountend,callback:function(e){t.$set(t.form,"amountend",e)},expression:"form.amountend"}},[o("template",{slot:"append"},[t._v("元")])],2)],1)]:t._e()],2)],1),o("el-form-item",{attrs:{label:"有效时间"}},[o("el-row",[o("el-col",{attrs:{span:"2"}},[o("el-radio",{attrs:{label:0},model:{value:t.form.timekind,callback:function(e){t.$set(t.form,"timekind",e)},expression:"form.timekind"}},[t._v("不限制")])],1)],1),o("el-row",[o("el-col",{attrs:{span:"2"}},[o("el-radio",{attrs:{label:2},model:{value:t.form.timekind,callback:function(e){t.$set(t.form,"timekind",e)},expression:"form.timekind"}},[t._v("量化时间")])],1),"2"==t.form.timekind?[o("el-col",{attrs:{span:"4"}},[o("el-input",{attrs:{placeholder:"请输入有效天数"},model:{value:t.form.duration,callback:function(e){t.$set(t.form,"duration",e)},expression:"form.duration"}})],1),o("el-col",{staticStyle:{color:"#999","margin-left":"10px"},attrs:{span:"10"}},[t._v("例如有效时常30天，则在发布或领取后30天失效")])]:t._e()],2)],1),o("el-form-item",{staticClass:"form-item-reach-type",attrs:{label:"使用门槛"}},[o("el-row",[o("el-col",{attrs:{span:"4"}},[o("el-radio",{attrs:{label:0},model:{value:t.reachType,callback:function(e){t.reachType=e},expression:"reachType"}},[t._v("\n              满\n              "),o("el-input",{staticStyle:{width:"100px"},model:{value:t.form.reach,callback:function(e){t.$set(t.form,"reach",e)},expression:"form.reach"}},[o("template",{slot:"append"},[t._v("元")])],2),o("span",{staticStyle:{"margin-left":"5px"}},[t._v("可用")])],1)],1)],1),o("el-row",[o("el-col",{attrs:{span:"4"}},[o("el-radio",{attrs:{label:1},model:{value:t.reachType,callback:function(e){t.reachType=e},expression:"reachType"}},[t._v("不限制")])],1)],1)],1),o("el-form-item",{attrs:{label:"适用商品"}},[o("el-row",[o("el-col",{attrs:{span:"4"}},[o("el-radio",{attrs:{label:0},model:{value:t.form.producttype,callback:function(e){t.$set(t.form,"producttype",e)},expression:"form.producttype"}},[t._v("可用于所有商品")])],1)],1),o("el-row",[o("el-col",{attrs:{span:"4"}},[o("el-radio",{attrs:{label:1},model:{value:t.form.producttype,callback:function(e){t.$set(t.form,"producttype",e)},expression:"form.producttype"}},[t._v("可用于部分商品")])],1),"1"==t.form.producttype?[o("el-col",{staticClass:"product-select",attrs:{span:"9"}},[o("el-select",{staticStyle:{width:"100%"},attrs:{loading:t.fetchProductLoading,"remote-method":t.getProducts,filterable:"",multiple:"",placeholder:"选择商品",remote:""},model:{value:t.form.productidsList,callback:function(e){t.$set(t.form,"productidsList",e)},expression:"form.productidsList"}},t._l(t.products,function(t){return o("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1)]:t._e()],2),o("el-row",[o("el-col",{attrs:{span:"4"}},[o("el-radio",{attrs:{label:2},model:{value:t.form.producttype,callback:function(e){t.$set(t.form,"producttype",e)},expression:"form.producttype"}},[t._v("不可用于部分商品")])],1),"2"==t.form.producttype?[o("el-col",{attrs:{span:"4"}},[o("el-select",{attrs:{loading:t.fetchProductLoading,"remote-method":t.getProducts,filterable:"",multiple:"",placeholder:"选择商品",remote:""},model:{value:t.form.productidsList,callback:function(e){t.$set(t.form,"productidsList",e)},expression:"form.productidsList"}},t._l(t.products,function(t){return o("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1)]:t._e()],2)],1)],1),o("div",{staticClass:"container conponedit-button"},[o("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("创建")])],1)])],1)},K=[],M={data:function(){return{form:{name:"",reach:"",timekind:0,duration:"",categorytype:0,categoryidsList:[],producttype:0,productidsList:[],amountkind:1,amountbegin:"",amountend:"",amount:""},reachType:0,categories:[],products:[],fetchProductLoading:!1}},created:function(){var t=this;this.token=Object(m["e"])(),Object(c["a"])("StoreCategoryService.GetCategoryList",Object(i["a"])("CategoryListQueryRequest",{token:Object(i["a"])("Token",{token:this.token}),ishidden:2,level:1,count:100,sortby:1})).then(function(e){t.categories=e.categorylistList})},methods:{getProducts:function(t){var e=this;if(!t)return this.products=[];this.fetchProductLoading=!0,Object(c["a"])("StoreProductService.GetProductList",Object(i["a"])("ProductListQueryRequest",{token:Object(i["a"])("Token",{token:this.token}),name:t,isonline:1,sortby:1,sort:1,count:100})).then(function(t){e.products=t.productlistList,e.fetchProductLoading=!1})},onSubmit:function(){var t=this,e=JSON.parse(JSON.stringify(this.form));e.amountbegin=this.$amount2(this.form.amountbegin),e.amountend=this.$amount2(this.form.amountend),e.amount=this.$amount2(this.form.amount),e.reach=this.$amount2(this.form.reach),1==this.reachType&&(e.reach=0),e.duration=parseInt(60*e.duration*60*24),Object(c["a"])("StoreCouponTemplateService.CreateCouponTemplate",Object(i["a"])("CouponTemplateWithTokenRequest",{token:Object(i["a"])("Token",{token:this.token}),coupontemplate:Object(i["a"])("CouponTemplate",e)})).then(function(e){t.$router.back()})}}},U=M,V=(o("ca1e"),Object(p["a"])(U,H,K,!1,null,null,null)),X=V.exports,Y={_0:b,_1:g,_2:S,_3:R,_4:E,_6:F,_7:X},Z={0:"_0",1:"_1",2:"_2",3:"_3",4:"_4",6:"_6",7:"_7"},tt=Object(l["a"])({name:"marketing-coupon-template-edit-entry",components:Y,map:Z}),et=tt,ot=Object(p["a"])(et,a,r,!1,null,null,null);e["default"]=ot.exports},"3fe0":function(t,e,o){"use strict";var a=o("e93d"),r=o.n(a);r.a},"789f":function(t,e,o){},"7b46":function(t,e,o){},"7c8f":function(t,e,o){"use strict";var a=o("1c0f"),r=o.n(a);r.a},8058:function(t,e,o){"use strict";var a=o("e131"),r=o.n(a);r.a},"80bf":function(t,e,o){"use strict";o("96cf");var a=o("1da1"),r=(o("7f7f"),o("a3fb"));e["a"]=function(t){var e=t.name,o=t.components,l=t.map;return{name:e,components:o,data:function(){return{store:{}}},created:function(){var t=Object(a["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(r["b"])();case 2:this.store=t.sent;case 3:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),render:function(t){return t(l[this.store.kind])}}}},c3bf:function(t,e,o){},ca1e:function(t,e,o){"use strict";var a=o("7b46"),r=o.n(a);r.a},e131:function(t,e,o){},e93d:function(t,e,o){},f972:function(t,e,o){"use strict";var a=o("0e0c"),r=o.n(a);r.a},f9d0:function(t,e,o){"use strict";var a=o("c3bf"),r=o.n(a);r.a}}]);
//# sourceMappingURL=marketing-couponedit.d975daa9.js.map